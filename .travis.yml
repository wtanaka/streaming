language: ruby
rvm:
- 1.9.3
sudo: required
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_8ffe13c5b63d_key -iv $encrypted_8ffe13c5b63d_iv
  -in sec.gpg.enc -out sec.gpg -d
- sudo apt-get update -qq
- sudo apt-get install -y ansible
script:
- make test
- ./codecov.sh
deploy:
- provider: script
  script: git fetch --unshallow; ./gradlew :beam:bintrayUpload :beam:uploadArchives :beam:closeAndReleaseRepository
  skip_cleanup: true
after_failure:
- "(cat .kitchen/logs/*.log | grep -v '^I, ')"
env:
  global:
  - secure: VMVA73SaIs7kTbA/VMFDp8Gr7kH6KXUJD6OTobHVD1sUA5JHcxd29Knp1JeeUUZJJ69SmpSxtZm9tgNCFC9zmAby5Wn6n+YdyWOHoNxSw9JJ4nMLe26Aw9HZSs2eNJMW4JOxc5iOCERVQ1yXbwC58d8X8/8tlQsNBLfmbaMwtMU8b1HXoErGcEs98wqgWq+/t6BKpi773JDSszAvH70TgymTwhrwxiIxLu2SO/+qC7285dg/JMSJilcsLrPSTcPjVH4a0VoJg9+AxAr0SpUBU83ilFIUE0T0P3Y++c0ABzgU56+BTOtyX0Qxf4XDsmVfGQQv3PDL7kJsgl7scveASCK6v6S5KEFjSUtNlTlMJK1kbwBwQ708NJZ+MSEYDhbpMhb7JDZseVXmbVCeFQkkaFLo3G1YMU2Z/OD7AMt3h5XSEr2FFe9oH/YkFxN5K+tPXVXkPGxVTCODpJ4JcwpEChtNqVIPs8X73l1chUTeK3EdRtwL5xZyg+X7R9apqy8kqwKN8PM82hgJt8FEYlDhw0+QxzVtCkFRjN0C16tFihcV1dK5TuSccER52VCu2qKm5z6xKhgGB4BZsNqCxutUf+hYGMSHbhPI6qm/16bHZWb4JFFBCEgUsf4zo/UadgLWezKZkeH+lprAiQAvItmYP4hCwn+XOkwo2PIZKbCnPp0=
  - secure: AFFtyJCPv/F0Va0KB0C9kuyqmsV0PSO8ISo9qG1Tv1TlzNMTnk1Ux+Fxr7b0s6E2LBuoIAy3yLBvvYagOFPn7bInn9XP+oWHehMsUhL/qXV2DX2/EUPKf78DwdSyP6K4yn9TnOcS2cmM9bMRUoYcqf8pMg6NyFQ38sdlE8K674NMRJrnwxJxgyz006gHiDohQxSwo4pozjgpAhxdM33cxLLQS/SEjQcTD17c4ZYhwsTXHcCOtKLBEiySGqxpRMtgsoNGlmhMehxXB2ROKi6ztEQz3PEsdNtbHo1ps2MY1WDXbeyc2qdtZpgW50EjFmIy2059Qv09iFzMVZdPEg85tzT/I4kipjQY9DYH78kdyXVcp9bkFzge2wuWOOTk6Qtx66JrxwQAlAW1UqLTDPMdHEOwS83LbHpYU6KstQxyKtQQ0K5BnWHNACDlDiQk1eqFkWzA4lleWN5OQaG1C5Jj1eLlwa8zqHeh6xjJX1NhOZJnLiPSLCSC1sx2FvVR6FnoIpD0uuwZxQVclkNDVDB4EoguiKwmvMr4/GljW7F3KadS7SI/jg9chianiZgDFIrF8NjZdxL9M+ISJ/VeSb+5nO5nS4rABa+jmeV7mED/WghhxHAcbEDte+vIKCqtl495x9nLdvAY8Lm59t0XtrRhjrSb+C2QaSDXKtp1c+GO90w=
  - secure: JPDwu+OW12NjxFaZknaGIGchjPPyUUyWfAxwsXbd5xBxxZvghc2Ka3CJXiZHleg6AA1DRs6OOQB00gfGGn57VekvJiKpPw3qEyAU/PKaZ5EduARFihSuMYjNIq1LxfYPljSvbVdxF3aoKeVFjMpmdOQifWgueqVvfz9tHRiLlc+2j9afG+SjQ0dBxtsIZNfwQUnn1E57yW9W7H0ebEVo+83OLcM/Yyg3kbh1knYU5nOovc2ZYXjHFnHfPLdG+08jGl80LV751RLBVyVEKfSyKkCp1OxWt9cc13wDtcZIhN4BMo2DFkZMBZh2+ZPVRStD/0Z3VA17D4GL+kOldw668UcwuwGnei0Ev+dzOm2LnnXmkgO/FCAZypDbpI0YhjnfzGFUdvx8lBV3SiuYe9+ZO1mXTLxW0fI3rsbO6KKPTYXtRKPYnlsxWEx+aiTfYgyatzF6FwW4MZt/tzk6jRSUs3LuAOpild3Y8eazEFTl57g/XRvfkdZUskZ4kIr6m3eB1f6F9+589kfJDFOgevzLxXfK3HYph4E5tqWeF9s97c/L8kVu56uhGObhZygRjrUiPI8NrbVgq+lKskr+vgHlWcbxaNzroS7+ChzwxAHAGJ4d92QYg2SVrBnOopX6/fjbq47nVi27Pnmy9znRqcZHP2ugS9z3xr2g+R22iNm3a6I=
  - secure: GjBkPjVXW41/+FCDzILtETguOPr95JAZN9leQ98gDKR8tkINttg5whS0u1Pwkq2G53IVzgsvi/AjuThESnnS8+G2GHPUHcFujYy1n1ckGIlzbZCmJxoyj+wNjgrwPHIhJdBKvT3AYHFVm3QKOZ/Bfhnk41LqchETLGRlkbZ365ESoRIjdW/R6ju1ZdFDofhnMZt/o3NdcJ8nMle6Hf5rpE4y30mPODEw6T+gPHds8qW/iEsdRjRCMyRXj3vtXSzU5bKLxpr4GwE9Cz1uw63FA/zxilind8ojeMU0hsGmwCiJP6zWXd/044IibR8RZsR9xIgl7R9OGRikM8gPyAcgkm+EVGBLG4u4tw8E04EHaom874RjkQS8t0joFZxR+pnz32amQQG9dYYFXSR98RTucVrUdu5tK4BJP3zVKCgTe/89GBWfKOYPUsFASbOfkxCc8waZov0LLPjGpcsk3kQ2w7g3VxoD2Y61hFsU9F5Uo+Ge+guklHi7kDgbMt2qIkXwMOfYyFIxRE2VAZCNQX3+hV9UfA4sUte91PFtTMtzKMT0uDKkSkLrNVzwpmvRun85yzViyFGMimCqhLJ8I11YoZbJWiJxE3jhL/cNUspzJbP2Ed5DHnflLis69kGcYgyov8ytkElqZ+sG2eUXkCYbvSynUgMDeUqnbLSN1bUREi0=
  - secure: BlCBS5xvKOBTD8I2VYBtqEyY0kxYYJQu7SviJX2JmDF6KjEjxWFUHFEO2Q63VbaynPW6t3+PBl5Foc+MDkETqd0qVhHmVj2uz6er25Ybhs8z/LX8PgbFx3DQ/cG5bHEbIBEc2ua+UnUwnWqpH3nDPk39fQXIyJTQPVN/Se1/yXtmBHvIK8YPJoA6ubihzsfPvdvf5wdC3T5hbCcSNYWgN4xpW8tURaFjPzYOjHAzHLjFPzUlcI057eCwH2CVUlHCEhCeUabBwmjs53KJZ+QBKDJeBguSl+SYpKo37DsBcy/lzVcnEKFcwR2j0VMLgl0Anj6uTqZfnKUb3NjTUM9JFQQ91VJhLMx4JSi2IUFG7m9+BpOuTPnY5hOcsh9Q6Btykf4HgmjoPb7MGw3lY/wgJ/DHo3bf2Znyg59zsVpyRhNhXSaLWeZqffy4LjUrGbBPFvrNIcHCsQo2diFwVUnrc5xyRRxqOwLLrXlp+g4Cbl5r4uW7aYUeSe3U+fdpcJ1BrG752nCZfCEQHv/wQHaU5azaJYDsRImzFvzDxCOVUFmDLo/MV5gbexKubPtOiZaI4Ssm4TBcAonSNYwDHR32W1NOiOyHdTtU3lLL4O0ywZCtsK49yRZa7fbLg7YAX90X6LzZz74efAVyxh09TG7d5dHyFmVSUPbAiUunmdFYujc=
